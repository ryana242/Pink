{"ast":null,"code":"var _jsxFileName = \"H:\\\\3-2\\\\pink\\\\Pink\\\\frontend\\\\src\\\\Components\\\\lodgeComplain.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Modal } from \"bootstrap\";\nimport axios from \"axios\";\nimport { useLocation } from \"react-router-dom\";\nimport AsyncSelect from \"react-select/async\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LodgeComplaint() {\n  _s();\n\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [isFilePicked, setIsFilePicked] = useState(false);\n  const [openCompAgainstMenu, setOpenCompAgainstMenu] = useState(false);\n  const [openCompReviewerMenu, setOpenCompReviewerMenu] = useState(false);\n  const [complainTitle, setComplainTitle] = useState(\"\");\n  const [complainDescription, setComplainDescription] = useState(\"\");\n  const [complainAgainst, setComplainAgainst] = useState([]);\n  const [reviewer, setReviewer] = useState(\"\");\n  const [complainTitleErrorClass, setComplainTitleErrorClass] = useState(\"none\");\n  const [complainDescriptionErrorClass, setComplainDescriptionErrorClass] = useState(\"none\");\n  const [complainAgainstErrorClass, setComplainAgainstErrorClass] = useState(\"none\");\n  const [reviewerErrorClass, setReviewerErrorClass] = useState(\"none\");\n  const [evidenceErrorClass, setEvidenceErrorClass] = useState(\"none\");\n  const [token, setToken] = useState(\"\");\n  const max = 250;\n  const location = useLocation();\n  useEffect(() => {\n    async function fetchData() {\n      console.log(location);\n      console.log(localStorage.getItem(\"userUNID\"));\n      setToken(localStorage.getItem(\"userUNID\"));\n\n      if (!localStorage.getItem(\"userUNID\") && location.state == null) {\n        window.location.replace(\"http://localhost:3000/login\");\n      }\n\n      if (location.state) {\n        setToken(location.state);\n      }\n    }\n\n    fetchData();\n  }, []);\n\n  const handleOkButtonClicked = () => {\n    if (location.state) {\n      window.location.replace(\"http://localhost:3000/admin-homepage\");\n    } else {\n      window.location.replace(\"http://localhost:3000/\");\n    }\n  };\n\n  const updateList = function (e) {\n    e.preventDefault();\n    const newFiles = selectedFiles.slice();\n\n    for (let i = 0; i < e.target.files.length; i++) {\n      newFiles.push(e.target.files[i]);\n    }\n\n    if (newFiles.length > 0) {\n      setIsFilePicked(true);\n      setEvidenceErrorClass(\"none\");\n    }\n\n    setSelectedFiles(newFiles);\n    e.target.value = \"\";\n  };\n\n  const handleCrossButton = function (e, index) {\n    e.preventDefault();\n    console.log(index);\n    const newFiles = selectedFiles.slice();\n    newFiles.splice(index, 1);\n    setSelectedFiles(newFiles);\n    console.log(newFiles);\n  };\n\n  const handleComplainAgainstOnChange = e => {\n    setOpenCompAgainstMenu(false);\n    setComplainAgainstErrorClass(\"none\");\n    const temp = [];\n\n    for (let i = 0; i < e.length; i++) {\n      temp.push(e[i].value);\n    }\n\n    setComplainAgainst(temp);\n  };\n\n  const handleReviewerOnChange = e => {\n    setOpenCompReviewerMenu(false);\n    setReviewerErrorClass(\"none\");\n    setReviewer(e.value);\n  };\n\n  const fetchComplainAgainstData = async (input, callback) => {\n    let response = await axios.get(\"http://localhost:8000/home/complain-against\", {\n      params: {\n        query: input,\n        userUNID: token\n      }\n    });\n    callback(response.data.data.map(i => ({\n      label: i.uniqueDetail,\n      value: i.userUNID,\n      isDisabled: reviewer == i.userUNID ? true : false\n    })));\n  };\n\n  const fetchReviewerData = async (input, callback) => {\n    let response = await axios.get(\"http://localhost:8000/home/reviewers\", {\n      params: {\n        query: input,\n        userUNID: token\n      }\n    });\n    console.log(response);\n    callback(response.data.data.map(i => ({\n      label: i.uniqueDetail,\n      value: i.userUNID,\n      isDisabled: complainAgainst.some(e => e == i.userUNID ? true : false)\n    })));\n  };\n\n  async function handleLodgeComplaintButtonClicked(e) {\n    e.preventDefault();\n    console.log(JSON.stringify(complainAgainst));\n    console.log(complainTitle.length);\n\n    if (!complainTitle || complainTitle.length > max) {\n      return setComplainTitleErrorClass(\"block\");\n    }\n\n    if (!complainDescription || complainDescription.length > max) {\n      return setComplainDescriptionErrorClass(\"block\");\n    }\n\n    if (complainAgainst.length === 0) {\n      return setComplainAgainstErrorClass(\"block\");\n    }\n\n    if (!isFilePicked) {\n      return setEvidenceErrorClass(\"block\");\n    }\n\n    if (!reviewer) {\n      return setReviewerErrorClass(\"block\");\n    }\n\n    console.log(selectedFiles);\n    const formData = new FormData();\n    formData.append(\"complainerUNID\", token);\n    formData.append(\"complainTitle\", complainTitle);\n    formData.append(\"complainDescription\", complainDescription);\n    formData.append(\"complainAgainstUserUNID\", JSON.stringify(complainAgainst));\n    formData.append(\"complainReviewerUserUNID\", reviewer);\n    selectedFiles.forEach(file => {\n      formData.append(\"file\", file);\n    });\n\n    for (var pair of formData.entries()) {\n      console.log(pair[0] + \" - \" + pair[1]);\n    }\n\n    let response = await axios.post(\"http://localhost:8000/home/lodge-complaint\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    });\n    console.log(response);\n\n    if (response.data.data) {\n      let myModal = new Modal(document.getElementById(\"exampleModal\"));\n      myModal.show();\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"flex-grow-1 background-color d-flex align-items-center justify-content-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"row justify-content-center w-100\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"col-xl-5 col-lg-7 col-md-9 col-11 my-4 primary-background-color px-lg-5 pb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"separator my-5 \",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-dark fw-light\",\n            children: \"Lodge Complaint\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleLodgeComplaintButtonClicked,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-group mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              class: \"form-control\",\n              id: \"emailInput\",\n              placeholder: \"Complain Title\",\n              onInput: e => {\n                setComplainTitle(e.target.value);\n              },\n              onChange: e => {\n                setComplainTitleErrorClass(\"none\");\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"text-danger d-\" + complainTitleErrorClass,\n              children: \"Enter Complaint Title(can't exceed 250 words).\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-group mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              class: \"form-control\",\n              id: \"form4Example3\",\n              rows: \"6\",\n              placeholder: \"Complain Description (upto 250 words)\",\n              style: {\n                resize: \"none\"\n              },\n              onInput: e => {\n                setComplainDescription(e.target.value);\n              },\n              onChange: e => {\n                setComplainDescriptionErrorClass(\"none\");\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"text-danger d-\" + complainDescriptionErrorClass,\n              children: \"Enter Complaint Description within 250 words.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group d-flex flex-column mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: [/*#__PURE__*/_jsxDEV(AsyncSelect, {\n                loadOptions: fetchComplainAgainstData,\n                placeholder: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    color: \"grey\"\n                  },\n                  children: \"Complain Against\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 21\n                }, this),\n                components: {\n                  DropdownIndicator: () => null,\n                  // Remove dropdown icon\n                  IndicatorSeparator: () => null // Remove separator\n\n                },\n                isMulti: true,\n                onChange: handleComplainAgainstOnChange,\n                onBlur: e => {\n                  setOpenCompAgainstMenu(false);\n                },\n                onInputChange: (e, _ref) => {\n                  let {\n                    action\n                  } = _ref;\n\n                  if (e.length === 0) {\n                    setOpenCompAgainstMenu(false);\n                    return;\n                  }\n\n                  if (action === \"input-change\") {\n                    setOpenCompAgainstMenu(true);\n                  }\n                },\n                menuIsOpen: openCompAgainstMenu\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                class: \"text-danger d-\" + complainAgainstErrorClass,\n                children: \"Select user(s) to complain against.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-group mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              class: \"button-attach ms-0\",\n              for: \"file\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"bi bi-paperclip me-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 17\n              }, this), \"Evidence\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              accept: \"image/*, application/pdf, video/*\",\n              id: \"file\",\n              type: \"file\",\n              name: \"file\",\n              multiple: true,\n              onChange: updateList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 15\n            }, this), isFilePicked ? /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"fileList\",\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                class: \"py-2 mb-0\",\n                children: selectedFiles.map((k, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                  class: \"d-flex justify-content-between align-items-center border rounded-3 border-3 border-light bg-white mt-2 ps-2\",\n                  children: [k.name, /*#__PURE__*/_jsxDEV(\"button\", {\n                    class: \"btn btn-light\",\n                    onClick: e => handleCrossButton(e, index),\n                    children: [\" \", \"x\", \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              class: \"d-none\",\n              children: \"Select a file to show details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"mb-2 text-danger d-\" + evidenceErrorClass,\n              children: \"Please attach evidence(s)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group d-flex flex-column mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: [/*#__PURE__*/_jsxDEV(AsyncSelect, {\n                loadOptions: fetchReviewerData,\n                placeholder: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    color: \"grey\"\n                  },\n                  children: \"Choose Reviewer(only one)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 21\n                }, this),\n                components: {\n                  DropdownIndicator: () => null,\n                  // Remove dropdown icon\n                  IndicatorSeparator: () => null // Remove separator\n\n                },\n                onChange: handleReviewerOnChange,\n                onBlur: e => {\n                  setOpenCompReviewerMenu(false);\n                },\n                onInputChange: (e, _ref2) => {\n                  let {\n                    action\n                  } = _ref2;\n\n                  if (e.length === 0) {\n                    setOpenCompReviewerMenu(false);\n                    return;\n                  }\n\n                  if (action === \"input-change\") {\n                    setOpenCompReviewerMenu(true);\n                  }\n                },\n                menuIsOpen: openCompReviewerMenu\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                class: \"text-danger d-\" + reviewerErrorClass,\n                children: \"Select a complaint reviewer.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-block\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              class: \"btn btn-primary w-100 fw-bold\",\n              children: \"Lodge Complaint\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"modal fade\",\n          \"data-bs-backdrop\": \"static\",\n          \"data-bs-keyboard\": \"false\",\n          id: \"exampleModal\",\n          tabindex: \"-1\",\n          \"aria-labelledby\": \"exampleModalLabel\",\n          \"aria-hidden\": \"true\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"modal-dialog modal-dialog-centered\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"modal-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"modal-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  class: \"modal-title\",\n                  id: \"exampleModalLabel\",\n                  children: \"Lodged Complaint Successfully!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  class: \"btn-close\",\n                  \"data-bs-dismiss\": \"modal\",\n                  \"aria-label\": \"Close\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"modal-body\",\n                children: \"Click OK to continue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"modal-footer\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  className: \"btn btn-primary\",\n                  onClick: handleOkButtonClicked,\n                  children: \"OK\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LodgeComplaint, \"Cj9fDL/vUgJuGPSQ2r2czRB5fP4=\", false, function () {\n  return [useLocation];\n});\n\n_c = LodgeComplaint;\nexport default LodgeComplaint;\n\nvar _c;\n\n$RefreshReg$(_c, \"LodgeComplaint\");","map":{"version":3,"sources":["H:/3-2/pink/Pink/frontend/src/Components/lodgeComplain.jsx"],"names":["React","useState","useEffect","Modal","axios","useLocation","AsyncSelect","LodgeComplaint","selectedFiles","setSelectedFiles","isFilePicked","setIsFilePicked","openCompAgainstMenu","setOpenCompAgainstMenu","openCompReviewerMenu","setOpenCompReviewerMenu","complainTitle","setComplainTitle","complainDescription","setComplainDescription","complainAgainst","setComplainAgainst","reviewer","setReviewer","complainTitleErrorClass","setComplainTitleErrorClass","complainDescriptionErrorClass","setComplainDescriptionErrorClass","complainAgainstErrorClass","setComplainAgainstErrorClass","reviewerErrorClass","setReviewerErrorClass","evidenceErrorClass","setEvidenceErrorClass","token","setToken","max","location","fetchData","console","log","localStorage","getItem","state","window","replace","handleOkButtonClicked","updateList","e","preventDefault","newFiles","slice","i","target","files","length","push","value","handleCrossButton","index","splice","handleComplainAgainstOnChange","temp","handleReviewerOnChange","fetchComplainAgainstData","input","callback","response","get","params","query","userUNID","data","map","label","uniqueDetail","isDisabled","fetchReviewerData","some","handleLodgeComplaintButtonClicked","JSON","stringify","formData","FormData","append","forEach","file","pair","entries","post","headers","myModal","document","getElementById","show","resize","color","DropdownIndicator","IndicatorSeparator","action","k","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Modal } from \"bootstrap\";\r\nimport axios from \"axios\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport AsyncSelect from \"react-select/async\";\r\n\r\nfunction LodgeComplaint() {\r\n  const [selectedFiles, setSelectedFiles] = useState([]);\r\n  const [isFilePicked, setIsFilePicked] = useState(false);\r\n  const [openCompAgainstMenu, setOpenCompAgainstMenu] = useState(false);\r\n  const [openCompReviewerMenu, setOpenCompReviewerMenu] = useState(false);\r\n  const [complainTitle, setComplainTitle] = useState(\"\");\r\n  const [complainDescription, setComplainDescription] = useState(\"\");\r\n  const [complainAgainst, setComplainAgainst] = useState([]);\r\n  const [reviewer, setReviewer] = useState(\"\");\r\n  const [complainTitleErrorClass, setComplainTitleErrorClass] =\r\n    useState(\"none\");\r\n  const [complainDescriptionErrorClass, setComplainDescriptionErrorClass] =\r\n    useState(\"none\");\r\n  const [complainAgainstErrorClass, setComplainAgainstErrorClass] =\r\n    useState(\"none\");\r\n  const [reviewerErrorClass, setReviewerErrorClass] = useState(\"none\");\r\n  const [evidenceErrorClass, setEvidenceErrorClass] = useState(\"none\");\r\n  const [token, setToken] = useState(\"\");\r\n  const max = 250;\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      console.log(location);\r\n      console.log(localStorage.getItem(\"userUNID\"));\r\n      setToken(localStorage.getItem(\"userUNID\"))\r\n      if (((!localStorage.getItem(\"userUNID\")) && (location.state == null))) {\r\n          window.location.replace(\"http://localhost:3000/login\");\r\n      }\r\n      if (location.state){\r\n        setToken(location.state)\r\n      }\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleOkButtonClicked = () => {\r\n    if (location.state) {\r\n      window.location.replace(\"http://localhost:3000/admin-homepage\");\r\n    } else {\r\n      window.location.replace(\"http://localhost:3000/\");\r\n    }\r\n  }\r\n\r\n\r\n  const updateList = function (e) {\r\n    e.preventDefault();\r\n    const newFiles = selectedFiles.slice();\r\n    for (let i = 0; i < e.target.files.length; i++) {\r\n      newFiles.push(e.target.files[i]);\r\n    }\r\n    if (newFiles.length > 0) {\r\n      setIsFilePicked(true);\r\n      setEvidenceErrorClass(\"none\");\r\n    }\r\n    setSelectedFiles(newFiles);\r\n    e.target.value = \"\";\r\n  };\r\n\r\n  const handleCrossButton = function (e, index) {\r\n    e.preventDefault();\r\n    console.log(index);\r\n    const newFiles = selectedFiles.slice();\r\n    newFiles.splice(index, 1);\r\n    setSelectedFiles(newFiles);\r\n    console.log(newFiles);\r\n  };\r\n\r\n  const handleComplainAgainstOnChange = (e) => {\r\n    setOpenCompAgainstMenu(false);\r\n    setComplainAgainstErrorClass(\"none\");\r\n    const temp = [];\r\n    for (let i = 0; i < e.length; i++) {\r\n      temp.push(e[i].value);\r\n    }\r\n    setComplainAgainst(temp);\r\n  };\r\n\r\n  const handleReviewerOnChange = (e) => {\r\n    setOpenCompReviewerMenu(false);\r\n    setReviewerErrorClass(\"none\");\r\n    setReviewer(e.value);\r\n  };\r\n\r\n  const fetchComplainAgainstData = async (input, callback) => {\r\n    let response = await axios.get(\r\n      \"http://localhost:8000/home/complain-against\",\r\n      {\r\n        params: {\r\n          query: input,\r\n          userUNID: token,\r\n        },\r\n      }\r\n    );\r\n    callback(\r\n      response.data.data.map((i) => ({\r\n        label: i.uniqueDetail,\r\n        value: i.userUNID,\r\n        isDisabled: reviewer == i.userUNID ? true : false,\r\n      }))\r\n    );\r\n  };\r\n\r\n  const fetchReviewerData = async (input, callback) => {\r\n    let response = await axios.get(\"http://localhost:8000/home/reviewers\", {\r\n      params: {\r\n        query: input,\r\n        userUNID: token,\r\n      },\r\n    });\r\n    console.log(response);\r\n    callback(\r\n      response.data.data.map((i) => ({\r\n        label: i.uniqueDetail,\r\n        value: i.userUNID,\r\n        isDisabled: complainAgainst.some((e) =>\r\n          e == i.userUNID ? true : false\r\n        ),\r\n      }))\r\n    );\r\n  };\r\n\r\n  async function handleLodgeComplaintButtonClicked(e) {\r\n    e.preventDefault();\r\n    console.log(JSON.stringify(complainAgainst));\r\n    console.log(complainTitle.length);\r\n    if (!complainTitle || complainTitle.length > max) {\r\n      return setComplainTitleErrorClass(\"block\");\r\n    }\r\n    if (!complainDescription || complainDescription.length > max) {\r\n      return setComplainDescriptionErrorClass(\"block\");\r\n    } \r\n    if (complainAgainst.length === 0) {\r\n      return setComplainAgainstErrorClass(\"block\");\r\n    }\r\n    if (!isFilePicked) {\r\n      return setEvidenceErrorClass(\"block\");\r\n    }\r\n    if (!reviewer) {\r\n      return setReviewerErrorClass(\"block\");\r\n    }\r\n\r\n    console.log(selectedFiles);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"complainerUNID\", token);\r\n    formData.append(\"complainTitle\", complainTitle);\r\n    formData.append(\"complainDescription\", complainDescription);\r\n    formData.append(\"complainAgainstUserUNID\", JSON.stringify(complainAgainst));\r\n    formData.append(\"complainReviewerUserUNID\", reviewer);\r\n    selectedFiles.forEach((file) => {\r\n      formData.append(\"file\", file);\r\n    });\r\n\r\n    for (var pair of formData.entries()) {\r\n      console.log(pair[0] + \" - \" + pair[1]);\r\n    }\r\n\r\n    let response = await axios.post(\r\n      \"http://localhost:8000/home/lodge-complaint\",\r\n      formData,\r\n      {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" },\r\n      }\r\n    );\r\n    console.log(response);\r\n    if (response.data.data) {\r\n      let myModal = new Modal(document.getElementById(\"exampleModal\"));\r\n      myModal.show();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div class=\"flex-grow-1 background-color d-flex align-items-center justify-content-center\">\r\n      <div class=\"row justify-content-center w-100\">\r\n        <div class=\"col-xl-5 col-lg-7 col-md-9 col-11 my-4 primary-background-color px-lg-5 pb-5\">\r\n          <div class=\"separator my-5 \">\r\n            <h1 className=\"text-dark fw-light\">Lodge Complaint</h1>\r\n          </div>\r\n          <form onSubmit={handleLodgeComplaintButtonClicked}>\r\n            <div class=\"form-group mb-4\">\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"emailInput\"\r\n                placeholder=\"Complain Title\"\r\n                onInput={(e) => {\r\n                  setComplainTitle(e.target.value);\r\n                }}\r\n                onChange={(e) => {\r\n                  setComplainTitleErrorClass(\"none\");\r\n                }}\r\n              ></input>\r\n              <span class={\"text-danger d-\" + complainTitleErrorClass}>\r\n                Enter Complaint Title(can't exceed 250 words).\r\n              </span>\r\n            </div>\r\n            <div class=\"form-group mb-4\">\r\n              <textarea\r\n                class=\"form-control\"\r\n                id=\"form4Example3\"\r\n                rows=\"6\"\r\n                placeholder=\"Complain Description (upto 250 words)\"\r\n                style={{ resize: \"none\" }}\r\n                onInput={(e) => {\r\n                  setComplainDescription(e.target.value);\r\n                }}\r\n                onChange={(e) => {\r\n                  setComplainDescriptionErrorClass(\"none\");\r\n                }}\r\n              ></textarea>\r\n              <span class={\"text-danger d-\" + complainDescriptionErrorClass}>\r\n                Enter Complaint Description within 250 words.\r\n              </span>\r\n            </div>\r\n            <div className=\"form-group d-flex flex-column mb-4\">\r\n              <div className=\"col-12\">\r\n                <AsyncSelect\r\n                  loadOptions={fetchComplainAgainstData}\r\n                  placeholder={\r\n                    <div style={{ color: \"grey\" }}>Complain Against</div>\r\n                  }\r\n                  components={{\r\n                    DropdownIndicator: () => null, // Remove dropdown icon\r\n                    IndicatorSeparator: () => null, // Remove separator\r\n                  }}\r\n                  isMulti\r\n                  onChange={handleComplainAgainstOnChange}\r\n                  onBlur={(e) => {\r\n                    setOpenCompAgainstMenu(false);\r\n                  }}\r\n                  onInputChange={(e, { action }) => {\r\n                    if (e.length === 0) {\r\n                      setOpenCompAgainstMenu(false);\r\n                      return;\r\n                    }\r\n                    if (action === \"input-change\") {\r\n                      setOpenCompAgainstMenu(true);\r\n                    }\r\n                  }}\r\n                  menuIsOpen={openCompAgainstMenu}\r\n                />\r\n                <span class={\"text-danger d-\" + complainAgainstErrorClass}>\r\n                  Select user(s) to complain against.\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div class=\"form-group mb-4\">\r\n              <label class=\"button-attach ms-0\" for=\"file\">\r\n                <i class=\"bi bi-paperclip me-1\"></i>\r\n                Evidence\r\n              </label>\r\n              <input\r\n                accept=\"image/*, application/pdf, video/*\"\r\n                id=\"file\"\r\n                type=\"file\"\r\n                name=\"file\"\r\n                multiple\r\n                onChange={updateList}\r\n              ></input>\r\n              {isFilePicked ? (\r\n                <div id=\"fileList\">\r\n                  <ul class=\"py-2 mb-0\">\r\n                    {selectedFiles.map((k, index) => (\r\n                      <li class=\"d-flex justify-content-between align-items-center border rounded-3 border-3 border-light bg-white mt-2 ps-2\">\r\n                        {k.name}\r\n                        <button\r\n                          class=\"btn btn-light\"\r\n                          onClick={(e) => handleCrossButton(e, index)}\r\n                        >\r\n                          {\" \"}\r\n                          x{\" \"}\r\n                        </button>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              ) : (\r\n                <p class=\"d-none\">Select a file to show details</p>\r\n              )}\r\n              <span class={\"mb-2 text-danger d-\" + evidenceErrorClass}>\r\n                Please attach evidence(s)\r\n              </span>\r\n            </div>\r\n            <div className=\"form-group d-flex flex-column mb-4\">\r\n              <div className=\"col-12\">\r\n                <AsyncSelect\r\n                  loadOptions={fetchReviewerData}\r\n                  placeholder={\r\n                    <div style={{ color: \"grey\" }}>\r\n                      Choose Reviewer(only one)\r\n                    </div>\r\n                  }\r\n                  components={{\r\n                    DropdownIndicator: () => null, // Remove dropdown icon\r\n                    IndicatorSeparator: () => null, // Remove separator\r\n                  }}\r\n                  onChange={handleReviewerOnChange}\r\n                  onBlur={(e) => {\r\n                    setOpenCompReviewerMenu(false);\r\n                  }}\r\n                  onInputChange={(e, { action }) => {\r\n                    if (e.length === 0) {\r\n                      setOpenCompReviewerMenu(false);\r\n                      return;\r\n                    }\r\n                    if (action === \"input-change\") {\r\n                      setOpenCompReviewerMenu(true);\r\n                    }\r\n                  }}\r\n                  menuIsOpen={openCompReviewerMenu}\r\n                />\r\n                <span class={\"text-danger d-\" + reviewerErrorClass}>\r\n                  Select a complaint reviewer.\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div className=\"d-block\">\r\n              <button type=\"submit\" class=\"btn btn-primary w-100 fw-bold\">\r\n                Lodge Complaint\r\n              </button>\r\n            </div>\r\n          </form>\r\n          <div\r\n            class=\"modal fade\"\r\n            data-bs-backdrop=\"static\"\r\n            data-bs-keyboard=\"false\"\r\n            id=\"exampleModal\"\r\n            tabindex=\"-1\"\r\n            aria-labelledby=\"exampleModalLabel\"\r\n            aria-hidden=\"true\"\r\n          >\r\n            <div class=\"modal-dialog modal-dialog-centered\">\r\n              <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                  <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n                    Lodged Complaint Successfully!\r\n                  </h5>\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn-close\"\r\n                    data-bs-dismiss=\"modal\"\r\n                    aria-label=\"Close\"\r\n                  ></button>\r\n                </div>\r\n                <div class=\"modal-body\">Click OK to continue</div>\r\n                <div class=\"modal-footer\">\r\n                  <a className=\"btn btn-primary\" onClick={handleOkButtonClicked}>\r\n                    OK\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LodgeComplaint;\r\n"]},"metadata":{},"sourceType":"module"}